<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BlackForge | Admin Marketplace</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>window.tailwind = window.tailwind || {};</script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { display: ["Orbitron", "sans-serif"], body: ["Rajdhani", "sans-serif"] },
          colors: { coal: "#070707", crimson: "#D80B17", ember: "#FF4D4D", wine: "#52060A" }
        }
      }
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@400;500;700&display=swap" rel="stylesheet">
  <style>.glass{background:linear-gradient(145deg,rgba(255,255,255,.09),rgba(255,255,255,.03));backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.12)}</style>
</head>
<body class="bg-coal text-white font-body min-h-screen">
  <div class="fixed inset-0 -z-10 overflow-hidden"><div class="absolute -top-24 -left-20 w-[32rem] h-[32rem] bg-crimson/20 blur-3xl rounded-full"></div><div class="absolute top-1/2 right-0 w-[28rem] h-[28rem] bg-wine/60 blur-3xl rounded-full"></div></div>

  <header class="max-w-7xl mx-auto px-4 sm:px-6 py-6">
    <nav class="glass rounded-2xl p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between">
      <div class="flex items-center gap-3"><img src="./imagenes/logo.png" alt="BlackForge logo" class="w-10 h-10 rounded-lg object-cover border border-white/20 bg-black/30" onerror="this.style.display='none';this.nextElementSibling.style.marginLeft='0';" /><p class="font-display text-lg tracking-[2px]">ADMIN MARKETPLACE</p></div>
      <div class="flex flex-wrap gap-3 text-sm sm:text-base">
        <a href="./juegos.html" class="hover:text-ember">Volver a Marketplace</a>
      </div>
    </nav>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 pb-20 space-y-6">
    <section id="auth-panel" class="glass rounded-3xl p-6">
      <h1 class="font-display text-3xl">Ingreso Admin</h1>
      <form id="login-form" class="mt-4 grid md:grid-cols-2 gap-3">
        <input id="login-user" placeholder="Usuario" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
        <input id="login-pass" placeholder="Contrasena" type="password" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
        <button class="md:col-span-2 px-4 py-3 rounded-xl bg-gradient-to-r from-red-700 to-red-500 hover:brightness-110">Ingresar</button>
      </form>
      <p id="auth-status" class="mt-3 text-zinc-300"></p>
    </section>

    <div id="admin-panel" class="hidden space-y-6">
      <section class="glass rounded-3xl p-6">
        <div class="flex items-center justify-between gap-4 flex-wrap">
          <h2 class="font-display text-3xl">Credenciales</h2>
          <button id="logout-btn" class="px-4 py-2 rounded-lg border border-red-500/50 text-red-300">Cerrar sesion</button>
        </div>
        <p class="text-zinc-300 mt-1">Solo `knoir` puede crear y eliminar usuarios admin.</p><p id="owner-only-note" class="text-zinc-500 text-sm mt-1"></p>
        <form id="user-form" class="mt-4 grid md:grid-cols-2 gap-3">
          <input id="new-user" placeholder="Nuevo usuario" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <input id="new-pass" placeholder="Nueva contrasena" type="password" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <button class="md:col-span-2 px-4 py-2 rounded-lg border border-white/20 hover:border-ember">Crear acceso</button>
        </form>
        <p id="user-status" class="mt-2 text-zinc-300"></p>
        <div id="users-list" class="mt-3 text-sm text-zinc-400"></div>
      </section>

      <section class="glass rounded-3xl p-6">
        <h2 class="font-display text-3xl">Membresias y precios</h2>
        <p class="text-zinc-300 mt-1">Lo que guardes aqui se usa en Stripe Checkout de membresias.</p>
        <form id="membership-form" class="mt-4 grid md:grid-cols-2 gap-3">
          <input id="membership-id" placeholder="id (ej. bf-golden)" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <input id="membership-name" placeholder="Nombre" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <select id="membership-interval" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2"><option value="mes">mes</option><option value="ano">ano</option></select>
          <input id="membership-price" type="number" step="0.01" placeholder="Precio" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <input id="membership-tier" placeholder="Tier (Base/Pro)" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" />
          <input id="membership-highlight" placeholder="Highlight" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" />
          <input id="membership-stripe-price-id" placeholder="stripePriceId (opcional)" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2 md:col-span-2" />
          <textarea id="membership-perks" rows="3" placeholder="Perks (uno por linea)" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2 md:col-span-2"></textarea>
          <button class="md:col-span-2 px-4 py-2 rounded-lg border border-white/20 hover:border-ember">Guardar membresia</button>
        </form>
        <p id="membership-admin-status" class="mt-2 text-zinc-300"></p>
        <div id="memberships-admin-list" class="grid md:grid-cols-2 gap-3 mt-3"></div>
      </section>

            <section class="glass rounded-3xl p-6">
        <div class="flex items-center justify-between gap-4 flex-wrap">
          <h2 class="font-display text-3xl">Cuentas de Membresia</h2>
          <div class="flex items-center gap-2">
            <label class="text-sm text-zinc-300">Plan</label>
            <select id="member-log-plan" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2">
              <option value="">Todos</option>
              <option value="bf-golden">BF Golden</option>
              <option value="bf-nocturna">BF: Nocturna</option>
            </select>
            <button id="member-log-refresh" class="px-3 py-2 rounded-lg border border-white/20 hover:border-ember">Cargar</button>
          </div>
        </div>
        <p id="member-log-status" class="mt-2 text-zinc-300"></p>

        <div class="mt-4 grid md:grid-cols-2 gap-4">
          <article class="glass rounded-2xl p-4 border border-white/10">
            <h3 class="font-display text-xl">Resumen por plan</h3>
            <div id="member-plan-totals" class="mt-3 text-sm text-zinc-300 space-y-1"></div>
          </article>
          <article class="glass rounded-2xl p-4 border border-white/10">
            <h3 class="font-display text-xl">Logs recientes</h3>
            <div id="member-logs" class="mt-3 text-xs text-zinc-300 max-h-56 overflow-auto space-y-2"></div>
          </article>
        </div>

        <div class="mt-4">
          <h3 class="font-display text-xl">Cuentas registradas</h3>
          <div id="member-accounts" class="grid md:grid-cols-2 lg:grid-cols-3 gap-3 mt-3"></div>
        </div>
      </section>
      <section class="glass rounded-3xl p-6">
        <h2 class="font-display text-3xl">Cupones</h2>
        <form id="coupon-form" class="mt-4 grid md:grid-cols-3 gap-3">
          <input id="coupon-code-admin" placeholder="Codigo" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <select id="coupon-type-admin" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2"><option value="percent">percent</option><option value="fixed">fixed</option></select>
          <input id="coupon-value-admin" type="number" step="0.01" placeholder="Valor" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <input id="coupon-expires-admin" placeholder="Vence (YYYY-MM-DD)" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" />
          <input id="coupon-description-admin" placeholder="Descripcion" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2 md:col-span-2" />
          <label class="flex items-center gap-2"><input id="coupon-active-admin" type="checkbox" checked>Activo</label>
          <button class="md:col-span-3 px-4 py-2 rounded-lg border border-white/20 hover:border-ember">Guardar cupon</button>
        </form>
        <p id="coupon-admin-status" class="mt-2 text-zinc-300"></p>
        <div id="coupons-admin-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-3 mt-3"></div>
      </section>

      <section class="glass rounded-3xl p-6">
        <h2 class="font-display text-3xl">Juegos y precios</h2>
        <p class="text-zinc-300 mt-1">Los precios se usan directo en Stripe Checkout de juegos.</p>
        <form id="game-form" class="mt-4 grid md:grid-cols-2 gap-3">
          <input id="id" placeholder="id (ej. dark-signal)" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <input id="title" placeholder="Titulo" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <input id="genre" placeholder="Genero" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <input id="price" placeholder="Precio (ej. 19.99)" type="number" step="0.01" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" required />
          <input id="stripePriceId" placeholder="stripePriceId (opcional)" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" />
          <input id="image" placeholder="Ruta imagen (ej. ./imagenes/dark-signal.jpg)" class="bg-black/30 border border-white/20 rounded-lg px-3 py-2" />
          <textarea id="description" placeholder="Descripcion" class="md:col-span-2 bg-black/30 border border-white/20 rounded-lg px-3 py-2" rows="3" required></textarea>
          <button class="md:col-span-2 px-4 py-3 rounded-xl bg-gradient-to-r from-red-700 to-red-500 hover:brightness-110">Guardar juego</button>
        </form>
        <p id="form-status" class="mt-3 text-zinc-300"></p>
      </section>

      <section class="glass rounded-3xl p-6">
        <div class="flex items-center justify-between">
          <h2 class="font-display text-3xl">Catalogo actual</h2>
          <button id="refresh-btn" class="px-4 py-2 rounded-lg border border-white/20 hover:border-ember">Refrescar</button>
        </div>
        <div class="mt-4">
          <h3 class="font-display text-xl">Juegos</h3>
          <div id="games-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-3 mt-3"></div>
        </div>
      </section>
    </div>
  </main>

  <script src="./marketplace.js"></script>
</body>
</html>



